<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>万年历卡片</title>
    <link rel="stylesheet" href="/styles/card.css">
</head>
<body>
    <div class="container">
        <h1>万年历卡片</h1>
        <canvas id="calendarCanvas" width="400" height="300"></canvas>
        <div class="links">
            <a href="/">返回主页</a>
            <a href="/api/getpic" target="_blank">查看图片版本</a>
            <a href="/api/getapi" target="_blank">查看 API JSON 数据</a>
        </div>
    </div>
    <script>
        async function drawCalendar() {
            const canvas = document.getElementById('calendarCanvas');
            const ctx = canvas.getContext('2d');

            const response = await fetch('/api/getapi');
            const data = await response.json();

            // Background
            ctx.fillStyle = '#f0f0f0';
            ctx.fillRect(0, 0, 400, 300);

            // Title
            ctx.fillStyle = '#333';
            ctx.font = 'bold 20px simhei';
            ctx.textAlign = 'center';
            ctx.fillText('万年历', 200, 30);

            // Calendar content
            ctx.font = '14px simhei';
            ctx.textAlign = 'left';
            let y = 60;
            Object.entries(data).forEach(([key, value]) => {
                ctx.fillText(`${key}: ${value}`, 20, y);
                y += 20;
            });
        }

        drawCalendar();
    </script>
</body>
</html>